(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{157:function(e,t,a){},159:function(e,t,a){},161:function(e,t,a){},163:function(e,t,a){},165:function(e,t,a){},167:function(e,t,a){},169:function(e,t,a){},174:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(68),s=a.n(r),o=(a(77),a(7)),i=a(8),c=a(10),m=a(9),u=a(11),f=a(177),d=a(178),g=(a(79),a(71)),h=(a(81),a(4)),p=a(30),v=a.n(p),w=a(69),y=a.n(w).a.create({baseURL:"https://my-first-activity.firebaseio.com/-LYQMvCCcIhXxVdiPSvW"}),N=(a(157),function(e){var t=e.firstName.charAt(0).toUpperCase();return l.a.createElement("div",{className:"Tweet"},l.a.createElement("div",{className:"initials"},l.a.createElement("strong",null,t)),l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("strong",null,e.firstName," ",e.lastName)," ",e.time),e.message))}),E=(a(159),function(e){var t=null;return"input"===e.inputtype?t=l.a.createElement("input",Object.assign({className:"inputElement"},e)):"textarea"===e.inputtype&&(t=l.a.createElement("textarea",Object.assign({className:"inputElement"},e))),l.a.createElement("div",{className:"Input"},l.a.createElement("label",null,e.label),t)}),b=(a(161),function(e){return l.a.createElement("div",{className:"Button"},l.a.createElement("button",Object.assign({className:"loginButton"},e),e.children))}),T=(a(163),function(e){var t=e.email.charAt(0).toUpperCase();return l.a.createElement("div",{className:"PeopleToFollow"},l.a.createElement("div",{className:"initials"},l.a.createElement("strong",null,t)),l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("strong",null,e.firstName," ",e.lastName)),l.a.createElement(b,{type:"button",onClick:e.clicked},"Follow")))});h.initializeApp({apiKey:"AIzaSyBMNjWQ2WDynf58aa8Opmgd8_T5hV5cGFU",authDomain:"my-first-activity.firebaseapp.com",databaseURL:"https://my-first-activity.firebaseio.com",projectId:"my-first-activity",storageBucket:"my-first-activity.appspot.com",messagingSenderId:"494408684295"});var x=h.database(),k=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={loginEmail:"",nweTweet:"",followingTweets:[],allUsers:[{email:"jin@nieblo.com",firstName:"Jin",lastName:"Redmond",tweets:[],following:["mike@nieblo.com","shimano@nieblo.com"]},{email:"mike@nieblo.com",firstName:"mike",lastName:"cheal",tweets:[],following:[]},{email:"shimano@nieblo.com",firstName:"shimano",lastName:"koji",tweets:[{created_at:"2019-02-09T15:56:09-08:00",message:"hhhhhhhh"},{created_at:"2018-02-09T15:56:09-08:00",message:"ppppppp"}],following:[]},{email:"testmail@test.com",firstName:"testFirst",lastName:"testLast",tweets:[{created_at:"2019-01-09T15:56:09-08:00",message:"kkkkkk"}],following:[]}]},a.loadDatabase=function(e){y.get("/.json").then(function(t){var n=!0,l=!1,r=void 0;try{for(var s,o=t.data.allUsers[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var i=s.value;i.tweets||(i.tweets=[]),i.following||(i.following=[])}}catch(c){l=!0,r=c}finally{try{n||null==o.return||o.return()}finally{if(l)throw r}}a.setState({allUsers:t.data.allUsers}),a.storeTweetsYouFollow(e)}).catch(function(e){return console.log(e)})},a.updateDatabase=function(){var e=a.state.allUsers;x.ref("-LYQMvCCcIhXxVdiPSvW").set({allUsers:e})},a.logOutHandler=function(){console.log("logging out"),h.auth().signOut()},a.storeTweetsYouFollow=function(e){var t=[],n=[],l=a.state.allUsers,r=!0,s=!1,o=void 0;try{for(var i,c=l[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var m=i.value;m.email===e&&(n=m.following)}}catch(D){s=!0,o=D}finally{try{r||null==c.return||c.return()}finally{if(s)throw o}}var u=l.filter(function(e){return n.includes(e.email)}),f=!0,d=!1,h=void 0;try{for(var p,w=u[Symbol.iterator]();!(f=(p=w.next()).done);f=!0){var y=p.value;if(y.tweets.length){var N=!0,E=!1,b=void 0;try{for(var T,x=y.tweets[Symbol.iterator]();!(N=(T=x.next()).done);N=!0){var k=T.value;t.push(Object(g.a)({},k,{firstName:y.firstName,lastName:y.lastName}))}}catch(D){E=!0,b=D}finally{try{N||null==x.return||x.return()}finally{if(E)throw b}}}}}catch(D){d=!0,h=D}finally{try{f||null==w.return||w.return()}finally{if(d)throw h}}for(var S=[],U=0;U<t.length;U++){var j=t[U],C={};C.firstName=j.firstName,C.lastName=j.lastName,C.message=j.message,C.created_at=v()(j.created_at),S.push(C)}S.sort(function(e,t){return t.created_at.diff(e.created_at)});var O=S.map(function(e){return{firstName:e.firstName,lastName:e.lastName,message:e.message,created_at:e.created_at.format("MM/DD/YYYY")}});a.setState({followingTweets:O})},a.changeCurrentTweetHandler=function(e){var t=e.target.value;a.setState({newTweet:t})},a.createNewTweetHandler=function(){var e=a.state.loginEmail;if(a.state.newTweet&&a.state.loginEmail){var t=a.state.allUsers,n=v()().format(),l=!0,r=!1,s=void 0;try{for(var o,i=t[Symbol.iterator]();!(l=(o=i.next()).done);l=!0){var c=o.value;c.email===e&&c.tweets.push({message:a.state.newTweet,created_at:n,firstName:c.firstName,lastName:c.lastName})}}catch(m){r=!0,s=m}finally{try{l||null==i.return||i.return()}finally{if(r)throw s}}a.setState({allUsers:t,newTweet:""}),console.log("allUsers: ",t),a.updateDatabase(t)}},a.followUserHandler=function(e){var t=a.state.loginEmail,n=a.state.allUsers,l=!0,r=!1,s=void 0;try{for(var o,i=n[Symbol.iterator]();!(l=(o=i.next()).done);l=!0){var c=o.value;c.email===t&&c.following.push(e)}}catch(m){r=!0,s=m}finally{try{l||null==i.return||i.return()}finally{if(r)throw s}}a.setState({allUsers:n}),a.storeTweetsYouFollow(t),a.updateDatabase()},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;h.auth().onAuthStateChanged(function(t){if(t)e.setState({loginEmail:t.email}),e.loadDatabase(t.email);else{window.location.href="/",console.log("not logged in")}})}},{key:"render",value:function(){var e=this,t=l.a.createElement("p",null,"No tweet to display");this.state.followingTweets.length&&(t=this.state.followingTweets.map(function(e,t){return l.a.createElement(N,{firstName:e.firstName,lastName:e.lastName,message:e.message,time:e.created_at,key:t})}));var a=l.a.createElement("div",null,l.a.createElement(E,{placeholder:"tweet...",type:"text",inputtype:"textarea",onChange:function(t){return e.changeCurrentTweetHandler(t)},value:this.state.newTweet,rows:"1"}),l.a.createElement(b,{type:"text",onClick:this.createNewTweetHandler},"Create")),n=this.state.loginEmail,r=l.a.createElement("p",null,"No other users");if(n){var s=this.state.allUsers,o=[],i=!0,c=!1,m=void 0;try{for(var u,f=s[Symbol.iterator]();!(i=(u=f.next()).done);i=!0){var d=u.value;d.email===n&&(o=d.following)}}catch(D){c=!0,m=D}finally{try{i||null==f.return||f.return()}finally{if(c)throw m}}var g=s.filter(function(e){return!o.includes(e.email)});(g=g.filter(function(e){return e.email!==n})).length&&(r=g.map(function(t,a){return l.a.createElement(T,{email:t.email,firstName:t.firstName,lastName:t.lastName,key:a,clicked:e.followUserHandler.bind(e,t.email)})}))}var h="";if(n){var p=this.state.allUsers,v="",w="",y=0,x=0,k=!0,S=!1,U=void 0;try{for(var j,C=p[Symbol.iterator]();!(k=(j=C.next()).done);k=!0){var O=j.value;O.email===n&&(v=O.firstName,w=O.lastName,y=O.tweets.length,x=O.following.length)}}catch(D){S=!0,U=D}finally{try{k||null==C.return||C.return()}finally{if(S)throw U}}h=l.a.createElement("div",{className:"userInfoContainer"},l.a.createElement("h2",null,v," ",w),l.a.createElement("div",{className:"userDetailContainer"},l.a.createElement("div",{className:"width-50"},l.a.createElement("div",null,l.a.createElement("a",{href:"/allTweets"},"Tweets")),y),l.a.createElement("div",{className:"width-50"},l.a.createElement("div",null,"Following"),x)))}return l.a.createElement("div",{className:"Home"},l.a.createElement("div",{className:"nav"},l.a.createElement(b,{type:"button",onClick:this.logOutHandler},"Log Out")),l.a.createElement("div",{className:"pageContainer"},l.a.createElement("div",{className:"flex-33"},h,l.a.createElement("div",{className:"peopleToFollowContainer"},r)),l.a.createElement("div",{className:"flex-66"},a,l.a.createElement("div",{className:"tweetsContainer"},t))))}}]),t}(n.Component),S=(a(165),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={errorMessage:"",emailText:"",passwordText:""},a.formLoginHandler=function(){var e=a.state.emailText,t=a.state.passwordText;h.auth().signInWithEmailAndPassword(e,t).catch(function(e){console.log(e.message),a.setState({errorMessage:e.message})})},a.inputTextHandler=function(e,t){"username"===t?a.setState({emailText:e.target.value}):a.setState({passwordText:e.target.value})},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){h.auth().onAuthStateChanged(function(e){if(e){console.log(e);window.location.href="/home"}else console.log("not logged in")})}},{key:"render",value:function(){var e=this,t="";this.state.errorMessage&&(t=l.a.createElement("p",{className:"errorText"},this.state.errorMessage));var a=l.a.createElement("form",null,l.a.createElement(E,{inputtype:"input",type:"text",label:"Username",onChange:function(t){return e.inputTextHandler(t,"username")}}),l.a.createElement(E,{inputtype:"input",type:"password",label:"Password",onChange:function(t){return e.inputTextHandler(t,"password")}}),t,l.a.createElement(b,{onClick:function(){return e.formLoginHandler()},type:"button"},"Log In"),l.a.createElement("div",{className:"linkContainer"},l.a.createElement("div",null,"or"),l.a.createElement("a",{id:"signupLink",href:"/signup"},"Sign Up")));return l.a.createElement("div",{className:"Login"},a)}}]),t}(n.Component)),U=(a(167),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={errorMessage:"",firstNameText:"",lastNameText:"",emailText:"",allUsers:{},passwordText:""},a.loadDatabase=function(){console.log("loading database"),y.get("/.json").then(function(e){console.log("load: ",e.data),e.data.allUsers.length?(console.log("yes length"),a.setState({allUsers:e.data.allUsers})):(console.log("no length"),a.setState({allUsers:[]}))}).catch(function(e){return console.log(e)})},a.updateDatabase=function(e,t,n){var l=a.state.allUsers;console.log("allusers: ",l),l.push({firstName:t,lastName:n,email:e,tweet:[],following:[]}),console.log("save data: ",l),x.ref("-LYQMvCCcIhXxVdiPSvW").set({allUsers:l})},a.formSignupHandler=function(){var e=a.state.emailText,t=a.state.passwordText,n=a.state.firstNameText,l=a.state.lastNameText;if(n&&l){a.updateDatabase(e,n,l),h.auth().createUserWithEmailAndPassword(e,t).catch(function(e){console.log(e.message),a.setState({errorMessage:e.message})})}else{a.setState({errorMessage:"First name and last name required."})}},a.inputTextHandler=function(e,t){"email"===t?a.setState({emailText:e.target.value}):"firstName"===t?a.setState({firstNameText:e.target.value}):"lastName"===t?a.setState({lastNameText:e.target.value}):"password"===t&&a.setState({passwordText:e.target.value})},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;h.auth().onAuthStateChanged(function(t){if(t){console.log(t);window.location.href="/home"}else console.log("not logged in"),e.loadDatabase()})}},{key:"render",value:function(){var e=this,t="";this.state.errorMessage&&(t=l.a.createElement("p",{className:"errorText"},this.state.errorMessage));var a=l.a.createElement("form",null,l.a.createElement(E,{inputtype:"input",type:"text",label:"Email",onChange:function(t){return e.inputTextHandler(t,"email")}}),l.a.createElement(E,{inputtype:"input",type:"text",label:"First name",onChange:function(t){return e.inputTextHandler(t,"firstName")}}),l.a.createElement(E,{inputtype:"input",type:"text",label:"Last name",onChange:function(t){return e.inputTextHandler(t,"lastName")}}),l.a.createElement(E,{inputtype:"input",type:"password",label:"Password",onChange:function(t){return e.inputTextHandler(t,"password")}}),t,l.a.createElement(b,{id:"signupButton",onClick:function(){return e.formSignupHandler()},type:"button"},"Sign Up"));return l.a.createElement("div",{className:"SignUp"},a)}}]),t}(n.Component)),j=(a(169),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={loginEmail:"",allUsers:[{email:"jin@nieblo.com",firstName:"Jin",lastName:"Redmond",tweets:[{created_at:"2019-12-09T15:56:09-08:00",message:"hihihi",firstName:"Jin",lastName:"Redmond"}],following:["mike@nieblo.com","shimano@nieblo.com"]},{email:"mike@nieblo.com",firstName:"mike",lastName:"cheal",tweets:[],following:[]},{email:"shimano@nieblo.com",firstName:"shimano",lastName:"koji",tweets:[{created_at:"2019-02-09T15:56:09-08:00",message:"hhhhhhhh"},{created_at:"2018-02-09T15:56:09-08:00",message:"ppppppp"}],following:[]},{email:"testmail@test.com",firstName:"testFirst",lastName:"testLast",tweets:[{created_at:"2019-02-09T15:56:09-08:00",message:"kkkkkk"}],following:[]}]},a.loadDatabase=function(){console.log("loading database"),y.get("/.json").then(function(e){console.log("load: ",e.data);var t=!0,n=!1,l=void 0;try{for(var r,s=e.data.allUsers[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var o=r.value;o.tweets||(o.tweets=[]),o.following||(o.following=[])}}catch(i){n=!0,l=i}finally{try{t||null==s.return||s.return()}finally{if(n)throw l}}console.log("new res.data: ",e.data),a.setState({allUsers:e.data.allUsers})}).catch(function(e){return console.log(e)})},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;h.auth().onAuthStateChanged(function(t){if(t){e.setState({loginEmail:t.email});var a=h.auth().currentUser;console.log("current user: ",a),e.loadDatabase()}else{window.location.href="/",console.log("not logged in")}})}},{key:"render",value:function(){var e=l.a.createElement("p",null,"You don't have any tweet"),t=this.state.allUsers,a=this.state.loginEmail,n=[],r=!0,s=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var m=i.value;m.email===a&&(n=m.tweets)}}catch(f){s=!0,o=f}finally{try{r||null==c.return||c.return()}finally{if(s)throw o}}console.log("tweets:",n);var u=n.map(function(e){return{firstName:e.firstName,lastName:e.lastName,message:e.message,created_at:v()(e.created_at)}}).map(function(e){return{firstName:e.firstName,lastName:e.lastName,message:e.message,created_at:e.created_at.format("MM/DD/YYYY")}});return n.length&&(e=u.map(function(e){return l.a.createElement(N,{firstName:e.firstName,message:e.message,time:e.created_at,key:e.created_at})})),l.a.createElement("div",{className:"AllTweets"},l.a.createElement("a",{href:"/home"},"Back"),e)}}]),t}(n.Component)),C=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return l.a.createElement(f.a,null,l.a.createElement("div",{className:"App"},l.a.createElement(d.a,{path:"/home",exact:!0,component:k}),l.a.createElement(d.a,{path:"/",exact:!0,component:S}),l.a.createElement(d.a,{path:"/signup",exact:!0,component:U}),l.a.createElement(d.a,{path:"/allTweets",exact:!0,component:j})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},72:function(e,t,a){e.exports=a(174)},77:function(e,t,a){},79:function(e,t,a){},81:function(e,t,a){}},[[72,2,1]]]);
//# sourceMappingURL=main.43c63719.chunk.js.map